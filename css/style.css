/* ═══════════════════════════════════════════════════════════
   HACCP PRO V3 — "Arctic Frost" Design System
   Inspired by Apple Human Interface Guidelines
   Identity: Deep Teal · Dark Navy Sidebar · Premium Glass
   Font: Inter (Google Fonts) 400–800
   8px grid · 48px inputs · 16px cards · Layered shadows
   ═══════════════════════════════════════════════════════════ */

/* ── RESET ── */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{font-size:16px;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent;scroll-behavior:smooth}
body{font-family:'Inter',-apple-system,BlinkMacSystemFont,'SF Pro Display','SF Pro Text','Segoe UI',sans-serif;background:var(--af-bg-page);color:var(--af-navy);line-height:1.6;min-height:100vh;min-height:100dvh;overflow-x:hidden;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility}
input,select,textarea,button{font-family:inherit;font-size:inherit;color:inherit}
a{color:inherit;text-decoration:none}
img{max-width:100%;height:auto}
::selection{background:rgba(8,145,178,.15);color:var(--af-navy)}

/* ══════════════════════════════════════════
   DESIGN TOKENS — Arctic Frost
   ══════════════════════════════════════════ */
:root{
  /* ── Core palette — Clean & Minimal ── */
  --af-navy:#111827;
  --af-teal:#0891B2;
  --af-teal-dark:#0E7490;
  --af-teal-deeper:#155E75;
  --af-teal-light:#A5F3FC;
  --af-teal-bg:#ECFEFF;
  --af-bg-page:#F9FAFB;
  --af-bg:#FFFFFF;
  --af-ok:#10B981;
  --af-ok-dark:#059669;
  --af-ok-bg:#ECFDF5;
  --af-ok-border:#A7F3D0;
  --af-warn:#F59E0B;
  --af-warn-dark:#D97706;
  --af-warn-bg:#FFFBEB;
  --af-warn-border:#FDE68A;
  --af-err:#EF4444;
  --af-err-dark:#DC2626;
  --af-err-bg:#FEF2F2;
  --af-err-border:#FECACA;
  --af-info:#3B82F6;
  --af-info-dark:#2563EB;
  --af-info-bg:#EFF6FF;
  --af-info-border:#BFDBFE;

  /* ── Brand gradients ── */
  --af-gradient:linear-gradient(135deg,#0891B2 0%,#06B6D4 100%);
  --af-gradient-subtle:linear-gradient(135deg,#0891B2 0%,#22D3EE 100%);

  /* ── Light Sidebar ── */
  --sidebar-bg:#FFFFFF;
  --sidebar-surface:#F3F4F6;
  --sidebar-border:#E5E7EB;
  --sidebar-text:#6B7280;
  --sidebar-text-bright:#111827;
  --sidebar-hover:#F3F4F6;
  --sidebar-active:rgba(8,145,178,.08);
  --sidebar-active-text:#0891B2;

  /* ── Ink / text hierarchy ── */
  --ink:#111827;
  --ink-secondary:#374151;
  --ink-light:#4B5563;
  --ink-muted:#6B7280;

  /* ── Backgrounds ── */
  --bg:#FFFFFF;
  --bg-off:#F9FAFB;
  --bg-page:#F9FAFB;
  --bg-warm:#F9FAFB;
  --surface-glass:rgba(255,255,255,0.8);
  --surface-glass-heavy:rgba(255,255,255,0.92);

  /* ── Status colors (short aliases) ── */
  --ok:var(--af-ok);--ok-dark:var(--af-ok-dark);--ok-bg:var(--af-ok-bg);--ok-border:var(--af-ok-border);
  --warn:var(--af-warn);--warn-dark:var(--af-warn-dark);--warn-bg:var(--af-warn-bg);--warn-border:var(--af-warn-border);
  --err:var(--af-err);--err-dark:var(--af-err-dark);--err-bg:var(--af-err-bg);--err-border:var(--af-err-border);
  --info:var(--af-info);--info-dark:var(--af-info-dark);--info-bg:var(--af-info-bg);--info-border:var(--af-info-border);

  /* ── Neutrals ── */
  --border:#E5E7EB;
  --border-light:#F3F4F6;
  --muted:#9CA3AF;

  /* ── Sizing ── */
  --radius:14px;
  --radius-sm:10px;
  --radius-lg:18px;
  --radius-xl:22px;
  --radius-pill:9999px;

  /* ── Apple-style layered shadows (ambient + key light) ── */
  --shadow-sm:0 0.5px 1px rgba(0,0,0,.04),0 1px 3px rgba(0,0,0,.06);
  --shadow-md:0 1px 2px rgba(0,0,0,.04),0 3px 8px rgba(0,0,0,.06),0 6px 18px rgba(0,0,0,.04);
  --shadow-lg:0 2px 4px rgba(0,0,0,.03),0 8px 20px rgba(0,0,0,.06),0 16px 40px rgba(0,0,0,.04);
  --shadow-xl:0 4px 8px rgba(0,0,0,.03),0 12px 32px rgba(0,0,0,.08),0 24px 60px rgba(0,0,0,.06);
  --shadow-2xl:0 8px 16px rgba(0,0,0,.04),0 20px 48px rgba(0,0,0,.1),0 40px 80px rgba(0,0,0,.08);
  --shadow-card:0 0.5px 1px rgba(0,0,0,.03),0 2px 6px rgba(0,0,0,.04),0 4px 12px rgba(0,0,0,.03);
  --shadow-card-hover:0 2px 4px rgba(0,0,0,.04),0 8px 24px rgba(0,0,0,.08),0 16px 40px rgba(0,0,0,.04);
  --shadow-teal:0 1px 3px rgba(8,145,178,.15),0 4px 12px rgba(8,145,178,.1);
  --shadow-teal-lg:0 2px 6px rgba(8,145,178,.2),0 8px 20px rgba(8,145,178,.12);

  /* ── Layout ── */
  --sidebar-w:260px;
  --header-h:64px;
  --bottomnav-h:72px;
  --page-pad:28px;
  --card-pad:24px;
  --input-h:48px;

  /* ── Apple-style easing & transitions ── */
  --ease:cubic-bezier(0.25,0.1,0.25,1);
  --ease-out:cubic-bezier(0,0,0.25,1);
  --ease-spring:cubic-bezier(0.34,1.56,0.64,1);
  --ease-apple:cubic-bezier(0.28,0.11,0.32,1);
  --transition-fast:180ms var(--ease-apple);
  --transition:250ms var(--ease-apple);
  --transition-slow:350ms var(--ease-apple);

  /* ── Backward-compat aliases ── */
  --primary:var(--af-teal);--primary-dark:var(--af-teal-dark);
  --primary-light:var(--af-teal-light);--primary-bg:var(--af-teal-bg);
  --accent:var(--af-teal);--accent-dark:var(--af-teal-dark);
  --accent-light:var(--af-teal-light);--accent-bg:var(--af-teal-bg);
  --success:var(--af-ok);--success-bg:var(--af-ok-bg);
  --warning:var(--af-warn);--warning-bg:var(--af-warn-bg);
  --danger:var(--af-err);--danger-bg:var(--af-err-bg);
  --gray:var(--muted);--gray-light:var(--border-light);--gray-border:var(--border);
  --shadow:var(--shadow-sm);

  /* ── Brand identity ── */
  --brand-primary:var(--af-teal);
  --brand-primary-dark:var(--af-teal-dark);
  --brand-primary-deeper:var(--af-teal-deeper);
  --brand-primary-light:var(--af-teal-light);
  --brand-primary-bg:var(--af-teal-bg);
  --brand-gradient:var(--af-gradient);
  --brand-gradient-subtle:var(--af-gradient-subtle);
}

/* ══════════════════════════════════════════
   ANIMATIONS
   ══════════════════════════════════════════ */
@keyframes fadeIn{from{opacity:0;transform:translateY(8px) scale(.99)}to{opacity:1;transform:translateY(0) scale(1)}}
@keyframes fadeInUp{from{opacity:0;transform:translateY(20px) scale(.98)}to{opacity:1;transform:translateY(0) scale(1)}}
@keyframes slideInLeft{from{opacity:0;transform:translateX(-20px)}to{opacity:1;transform:translateX(0)}}
@keyframes slideInUp{from{opacity:0;transform:translateY(24px) scale(.97)}to{opacity:1;transform:translateY(0) scale(1)}}
@keyframes scaleIn{from{opacity:0;transform:scale(.94)}to{opacity:1;transform:scale(1)}}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}
@keyframes spin{to{transform:rotate(360deg)}}
@keyframes shimmer{0%{background-position:-200% 0}100%{background-position:200% 0}}
@keyframes breathe{0%,100%{box-shadow:0 0 0 0 rgba(109,197,224,.4)}70%{box-shadow:0 0 0 10px rgba(109,197,224,0)}}
@keyframes slideDown{from{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}
@keyframes countUp{from{opacity:0;transform:scale(.85) translateY(6px)}to{opacity:1;transform:scale(1) translateY(0)}}
@keyframes pageEnter{from{opacity:0;transform:translateY(12px) scale(.995)}to{opacity:1;transform:translateY(0) scale(1)}}
@keyframes progressFill{from{width:0}to{width:var(--progress-w,100%)}}
@keyframes numberPop{0%{opacity:0;transform:scale(.7)}60%{transform:scale(1.05)}100%{opacity:1;transform:scale(1)}}
@keyframes ringReveal{from{stroke-dashoffset:var(--ring-circumference,283)}to{stroke-dashoffset:var(--ring-offset,0)}}
@keyframes subtleFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-4px)}}
@keyframes glowPulse{0%,100%{box-shadow:0 0 0 0 rgba(109,197,224,0)}50%{box-shadow:0 0 20px 4px rgba(109,197,224,.12)}}

.fade-in{animation:fadeIn .4s var(--ease-apple) both}
.slide-in{animation:slideInUp .45s var(--ease-apple) both}

/* Page transition */
.main-body{animation:pageEnter .4s var(--ease-apple) both}

/* Staggered entry — Apple-style cascade */
.animate-in{animation:fadeInUp .5s var(--ease-apple) both}
.animate-in:nth-child(1){animation-delay:.04s}
.animate-in:nth-child(2){animation-delay:.09s}
.animate-in:nth-child(3){animation-delay:.14s}
.animate-in:nth-child(4){animation-delay:.19s}
.animate-in:nth-child(5){animation-delay:.24s}
.animate-in:nth-child(6){animation-delay:.29s}
.animate-in:nth-child(7){animation-delay:.34s}
.animate-in:nth-child(8){animation-delay:.39s}

/* Hover lift — premium feel */
.hover-lift{transition:transform .35s var(--ease-apple),box-shadow .35s var(--ease-apple)}
.hover-lift:hover{transform:translateY(-6px);box-shadow:var(--shadow-card-hover)}

/* ══════════════════════════════════════════
   SKELETONS — Shimmer loading
   ══════════════════════════════════════════ */
.skeleton{background:linear-gradient(90deg,#E2E8F0 25%,#F1F5F9 37%,#E2E8F0 63%);background-size:400% 100%;animation:shimmer 1.4s ease infinite;border-radius:var(--radius-sm)}
.skeleton-text{height:14px;margin-bottom:10px;border-radius:6px}
.skeleton-text:last-child{width:55%}
.skeleton-card{height:120px;border-radius:var(--radius);margin-bottom:16px}
.skeleton-row{height:48px;margin-bottom:8px;border-radius:var(--radius-sm)}

/* ══════════════════════════════════════════
   BRAND TEXT — Gradient wordmark
   ══════════════════════════════════════════ */
.brand-text{color:var(--af-teal);-webkit-text-fill-color:var(--af-teal)}

/* ══════════════════════════════════════════
   TOAST NOTIFICATIONS — V2
   ══════════════════════════════════════════ */
.toast-container{position:fixed;bottom:calc(var(--bottomnav-h) + 16px);left:50%;transform:translateX(-50%);z-index:10000;display:flex;flex-direction:column-reverse;gap:8px;max-width:90vw;pointer-events:none}
.toast{position:relative;left:auto;bottom:auto;transform:translateY(80px);background:rgba(15,23,42,.88);backdrop-filter:saturate(180%) blur(20px);-webkit-backdrop-filter:saturate(180%) blur(20px);color:#fff;padding:14px 28px;border-radius:var(--radius-pill);font-size:14px;font-weight:600;box-shadow:var(--shadow-xl);z-index:9999;transition:transform .4s var(--ease-spring);pointer-events:none;max-width:90vw;text-align:center;letter-spacing:-.01em}
.toast.show{transform:translateY(0)}
.toast-success{background:var(--af-ok-dark)}
.toast-error{background:var(--af-err-dark)}
.toast-warning{background:var(--af-warn-dark)}
.toast-info{background:var(--af-info-dark)}

/* V2 toast with icon */
.v2-toast{padding:12px 20px;border-radius:var(--radius);font-size:14px;font-weight:600;box-shadow:var(--shadow-lg);display:flex;align-items:center;gap:10px;animation:slideInUp .3s var(--ease-spring)}
.v2-toast--success{background:var(--af-ok-dark);color:#fff}
.v2-toast--error{background:var(--af-err-dark);color:#fff}
.v2-toast--warning{background:var(--af-warn-dark);color:#fff}
.v2-toast--info{background:var(--af-info-dark);color:#fff}

/* ══════════════════════════════════════════
   AUTH — Login
   ══════════════════════════════════════════ */
.auth-wrapper{display:flex;align-items:center;justify-content:center;min-height:100vh;min-height:100dvh;padding:24px;background:var(--af-bg-page);position:relative;overflow:hidden}
.auth-wrapper::before{display:none}
.auth-wrapper::after{display:none}
.auth-card{width:100%;max-width:420px;background:#fff;border-radius:var(--radius-xl);padding:44px;box-shadow:var(--shadow-lg);animation:scaleIn .5s var(--ease-apple);position:relative;z-index:1;border:1px solid var(--border)}
.auth-logo{text-align:center;margin-bottom:40px}
.auth-logo h1{font-size:30px;font-weight:800;letter-spacing:-.6px;color:var(--af-teal)}
.auth-logo p{color:var(--ink-muted);font-size:13px;margin-top:10px;font-weight:500;letter-spacing:.02em}
.auth-logo-icon{font-size:52px;margin-bottom:14px;filter:drop-shadow(0 4px 12px rgba(109,197,224,.2))}
.auth-tabs{display:flex;gap:0;border-bottom:2px solid var(--border-light);margin-bottom:28px}
.auth-tab{flex:1;padding:12px 0;text-align:center;cursor:pointer;font-weight:700;font-size:14px;border:none;background:none;color:var(--muted);border-bottom:3px solid transparent;transition:all .2s var(--ease);margin-bottom:-2px}
.auth-tab:hover{color:var(--ink-light)}
.auth-tab.active{color:var(--af-teal);border-bottom-color:var(--af-teal)}
.auth-footer{text-align:center;font-size:12px;color:var(--muted);margin-top:24px;font-weight:500}

.pwd-overlay{position:fixed;inset:0;background:rgba(15,23,42,.6);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);display:flex;align-items:center;justify-content:center;z-index:9999;padding:20px}
.pwd-card{background:#fff;border-radius:var(--radius-lg);padding:36px;width:100%;max-width:420px;box-shadow:var(--shadow-2xl);animation:scaleIn .3s var(--ease);border:1px solid var(--border)}
.pwd-card h2{font-size:20px;margin-bottom:8px;color:var(--ink);font-weight:800;letter-spacing:-.3px}
.pwd-card p{color:var(--ink-muted);margin-bottom:24px;font-size:14px;line-height:1.5}
.pwd-hint{margin-top:12px;padding:12px;background:var(--bg-off);border-radius:var(--radius-sm);font-size:12px;color:var(--muted);line-height:1.5}

/* ══════════════════════════════════════════
   FORMS — 44px inputs, focus ring teal
   ══════════════════════════════════════════ */
.form-group{margin-bottom:22px}
.form-label{display:block;font-weight:600;font-size:12px;color:var(--ink-muted);margin-bottom:8px;letter-spacing:.06em;text-transform:uppercase}
.form-label .req{color:var(--af-err);font-weight:700}
.form-input,.form-select,.form-textarea{width:100%;padding:12px 16px;border:1.5px solid var(--border);border-radius:var(--radius-sm);font-size:15px;transition:all var(--transition);background:var(--bg);outline:none;font-weight:500;color:var(--ink);min-height:var(--input-h)}
.form-input::placeholder,.form-textarea::placeholder{color:var(--muted);font-weight:400}
.form-input:hover,.form-select:hover,.form-textarea:hover{border-color:#CBD5E1;background:#FAFBFC}
.form-input:focus,.form-select:focus,.form-textarea:focus{border-color:var(--af-teal);box-shadow:0 0 0 3px rgba(8,145,178,.1);background:#fff}
.form-textarea{resize:vertical;min-height:80px;line-height:1.5}
.form-row{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.form-hint{font-size:11px;color:var(--muted);margin-top:6px}
.form-error{font-size:12px;color:var(--af-err);margin-top:6px;font-weight:600;display:none}
.form-error.show{display:block}

/* Checkbox */
.form-check{display:flex;align-items:center;gap:10px;padding:10px 0;cursor:pointer}
.form-check input[type="checkbox"]{width:18px;height:18px;accent-color:var(--af-teal);cursor:pointer;border-radius:4px}
.form-check label{font-size:14px;font-weight:600;color:var(--ink);cursor:pointer}

/* Product input with datalist dropdown arrow */
.product-input-wrapper{position:relative}
.product-input-wrapper input{padding-right:36px}
.product-input-wrapper::after{content:'';position:absolute;right:14px;top:50%;transform:translateY(-50%);width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid var(--muted);pointer-events:none}

/* ══════════════════════════════════════════
   BUTTONS — 40px min, press scale(.97)
   ══════════════════════════════════════════ */
.btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:11px 22px;border-radius:var(--radius-sm);font-weight:600;font-size:14px;cursor:pointer;border:none;transition:all .3s var(--ease-apple);min-height:42px;touch-action:manipulation;position:relative;overflow:hidden;letter-spacing:-.01em;-webkit-tap-highlight-color:transparent}
.btn:active{transform:scale(.96);transition-duration:.1s}

.btn-primary{background:var(--af-teal);color:#fff;border:1.5px solid var(--af-teal-dark);box-shadow:var(--shadow-sm)}
.btn-primary:hover{background:var(--af-teal-dark);border-color:var(--af-teal-deeper);box-shadow:var(--shadow-teal);transform:translateY(-1px)}

.btn-success{background:var(--af-ok);color:#fff;border:1.5px solid var(--af-ok-dark);box-shadow:var(--shadow-sm)}
.btn-success:hover{background:var(--af-ok-dark);box-shadow:0 2px 8px rgba(16,185,129,.2);transform:translateY(-1px)}

.btn-danger{background:var(--af-err);color:#fff;border:1.5px solid var(--af-err-dark);box-shadow:var(--shadow-sm)}
.btn-danger:hover{background:var(--af-err-dark);box-shadow:0 2px 8px rgba(239,68,68,.2);transform:translateY(-1px)}

.btn-warning{background:var(--af-warn);color:#fff;border:1.5px solid var(--af-warn-dark);box-shadow:var(--shadow-sm)}
.btn-warning:hover{background:var(--af-warn-dark);box-shadow:0 2px 8px rgba(245,158,11,.2);transform:translateY(-1px)}

.btn-ghost{background:rgba(255,255,255,.8);color:var(--ink-secondary);border:1.5px solid var(--border);box-shadow:var(--shadow-sm);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}
.btn-ghost:hover{background:#fff;border-color:#CBD5E1;box-shadow:var(--shadow-md);transform:translateY(-1px)}

.btn-sm{padding:7px 14px;font-size:12px;min-height:34px;border-radius:var(--radius-sm);font-weight:600}
.btn-lg{padding:14px 32px;font-size:16px;min-height:50px;border-radius:var(--radius);font-weight:700;letter-spacing:-.02em}
.btn-block{width:100%}
.btn:disabled{opacity:.4;cursor:not-allowed;transform:none!important;box-shadow:none!important;filter:grayscale(.2)}

/* ══════════════════════════════════════════
   SIDEBAR — Dark Navy Premium
   ══════════════════════════════════════════ */
.sidebar{width:var(--sidebar-w);background:var(--sidebar-bg);position:fixed;top:0;left:0;bottom:0;z-index:100;display:flex;flex-direction:column;transition:transform .35s var(--ease-apple);border-right:1px solid var(--sidebar-border)}
.sidebar-header{padding:24px 22px 20px;border-bottom:1px solid var(--sidebar-border)}
.sidebar-brand{display:flex;align-items:center;gap:12px}
.sidebar-brand h2{font-size:19px;font-weight:800;letter-spacing:-.4px;color:var(--af-teal)}
.sidebar-brand span{font-size:26px}

.site-selector{padding:16px 18px;border-bottom:1px solid var(--sidebar-border)}
.site-selector select{width:100%;padding:10px 12px;border:1.5px solid var(--sidebar-border);border-radius:var(--radius-sm);font-size:13px;font-weight:600;background:var(--sidebar-surface);color:var(--sidebar-text-bright);cursor:pointer;transition:all var(--transition);appearance:none;-webkit-appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%236b7280' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 10px center}
.site-selector select:focus{border-color:var(--af-teal);box-shadow:0 0 0 2px rgba(8,145,178,.15)}

.sidebar-nav{flex:1;overflow-y:auto;padding:12px 10px;scrollbar-width:thin;scrollbar-color:var(--sidebar-border) transparent}
.sidebar-nav::-webkit-scrollbar{width:4px}
.sidebar-nav::-webkit-scrollbar-track{background:transparent}
.sidebar-nav::-webkit-scrollbar-thumb{background:var(--sidebar-border);border-radius:4px}

.nav-item{display:flex;align-items:center;gap:12px;padding:11px 14px;border-radius:var(--radius-sm);cursor:pointer;font-size:14px;font-weight:500;color:var(--sidebar-text);transition:all .25s var(--ease-apple);margin-bottom:3px;position:relative}
.nav-item:hover{background:var(--sidebar-hover);color:var(--sidebar-text-bright)}
.nav-item.active{background:var(--sidebar-active);color:var(--sidebar-active-text);font-weight:600}
.nav-item.active::before{content:'';position:absolute;left:0;top:6px;bottom:6px;width:3px;border-radius:0 3px 3px 0;background:var(--af-teal)}
.nav-item .nav-icon{font-size:18px;width:24px;text-align:center;flex-shrink:0}
.nav-section{font-size:10px;font-weight:700;color:var(--muted);text-transform:uppercase;letter-spacing:1.5px;padding:20px 14px 8px}
.nav-badge{margin-left:auto;background:var(--af-err);color:#fff;font-size:10px;padding:2px 8px;border-radius:10px;font-weight:700;min-width:20px;text-align:center;animation:pulse 2s infinite}

.sidebar-user{padding:18px;border-top:1px solid var(--sidebar-border);display:flex;align-items:center;gap:12px;background:var(--sidebar-bg)}
.sidebar-user .avatar{width:38px;height:38px;border-radius:50%;background:var(--af-teal);display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:800;color:#fff;flex-shrink:0}
.sidebar-user .user-info{flex:1;min-width:0}
.sidebar-user .user-name{font-size:13px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:var(--sidebar-text-bright)}
.sidebar-user .user-role{font-size:11px;color:var(--sidebar-text);font-weight:500;margin-top:2px}
.sidebar-user-actions{display:flex;flex-direction:column;gap:4px;flex-shrink:0}
.sidebar-action-btn{width:34px;height:34px;border-radius:var(--radius-sm);border:1px solid var(--border);background:var(--bg);color:var(--sidebar-text);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s var(--ease-apple)}
.sidebar-action-btn:hover{background:var(--sidebar-hover);color:var(--sidebar-text-bright)}
.sidebar-action-btn svg{flex-shrink:0}
.sidebar-logout-btn:hover{background:var(--af-err-bg);color:var(--af-err);border-color:var(--af-err-border)}

/* ══════════════════════════════════════════
   MAIN CONTENT — Header 64px blanc
   ══════════════════════════════════════════ */
.main-content{margin-left:var(--sidebar-w);flex:1;min-height:100vh;min-height:100dvh;background:var(--af-bg-page)}
.main-header{height:var(--header-h);background:#fff;border-bottom:1px solid var(--border);display:flex;align-items:center;padding:0 var(--page-pad);position:sticky;top:0;z-index:50;gap:16px}
.main-header h1{font-size:18px;font-weight:700;color:var(--ink);letter-spacing:-.3px}
.burger{display:none;background:none;border:none;font-size:22px;cursor:pointer;padding:8px;margin-right:10px;color:var(--ink);border-radius:var(--radius-sm);transition:background var(--transition-fast)}
.burger:hover{background:var(--bg-off)}
.main-body{padding:var(--page-pad);max-width:960px;animation:fadeIn .3s var(--ease)}

/* Site dropdown in header */
.site-dropdown{margin-left:auto}
.site-dropdown select{padding:8px 32px 8px 14px;border:1.5px solid var(--border);border-radius:var(--radius-pill);font-size:12px;font-weight:600;background:#fff;color:var(--ink);cursor:pointer;transition:all var(--transition);appearance:none;-webkit-appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%2364748b' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 10px center}
.site-dropdown select:focus{border-color:var(--af-teal);box-shadow:0 0 0 3px rgba(109,197,224,.1)}

/* ══════════════════════════════════════════
   CARDS — 12px radius, 24px padding, shadow-sm, border 1px
   ══════════════════════════════════════════ */
.card{background:#fff;border:1px solid var(--border);border-radius:var(--radius);margin-bottom:18px;overflow:hidden;box-shadow:var(--shadow-sm);transition:box-shadow .35s var(--ease-apple),transform .35s var(--ease-apple);position:relative}
.card:hover{box-shadow:var(--shadow-card-hover)}
.card-header{padding:16px var(--card-pad);font-weight:700;font-size:14px;display:flex;align-items:center;gap:10px;border-bottom:1px solid var(--border);color:var(--ink);background:var(--bg-off);letter-spacing:-.01em}
.card-body{padding:var(--card-pad)}
.card-footer{padding:14px var(--card-pad);border-top:1px solid var(--border);background:var(--bg-off)}

/* Card with accent — teal top bar */
.card-accent{position:relative;overflow:hidden}
.card-accent::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:var(--af-gradient);z-index:1}

/* ══════════════════════════════════════════
   GREETING BANNER — Dashboard welcome
   ══════════════════════════════════════════ */
.greeting-banner{margin-bottom:20px;padding:24px;background:#fff;border-radius:var(--radius-lg);border:1px solid var(--border);box-shadow:var(--shadow-sm);position:relative;overflow:hidden}
.greeting-banner--compact{padding:16px 20px;margin-bottom:16px}
.greeting-banner::before{display:none}
.greeting-banner::after{display:none}
.greeting-text{position:relative;z-index:1}
.greeting-text h2{margin:0;font-size:20px;font-weight:700;color:var(--ink);letter-spacing:-.3px}
.greeting-banner--compact .greeting-text h2{font-size:17px}
.greeting-text p{margin:4px 0 0;font-size:13px;color:var(--ink-muted);font-weight:500}
.greeting-banner--compact .greeting-text p{margin-top:2px;font-size:12px}

/* ══════════════════════════════════════════
   QUICK ACTIONS — Dashboard shortcuts
   ══════════════════════════════════════════ */
.quick-actions{display:grid;grid-template-columns:repeat(auto-fit,minmax(130px,1fr));gap:14px;margin-bottom:28px}
.quick-action{display:flex;flex-direction:column;align-items:center;gap:12px;padding:22px 14px;border-radius:var(--radius);background:#fff;border:1px solid var(--border);cursor:pointer;transition:all .35s var(--ease-apple);box-shadow:var(--shadow-sm);-webkit-tap-highlight-color:transparent;text-align:center}
.quick-action:hover{transform:translateY(-3px);box-shadow:var(--shadow-md);border-color:var(--af-teal);background:var(--af-teal-bg)}
.quick-action:active{transform:scale(.96);transition-duration:.1s}
.quick-action .qa-icon{font-size:30px;line-height:1;transition:transform .35s var(--ease-apple)}
.quick-action:hover .qa-icon{transform:scale(1.1)}
.quick-action .qa-label{font-size:12px;font-weight:700;color:var(--ink);letter-spacing:-.01em}

/* ══════════════════════════════════════════
   STATS — 28px value, border-left 4px
   ══════════════════════════════════════════ */
.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px;margin-bottom:24px}
.stat-card{background:#fff;border:1px solid var(--border);border-radius:var(--radius);padding:22px var(--card-pad);box-shadow:var(--shadow-sm);transition:all .35s var(--ease-apple);cursor:default;position:relative;overflow:hidden}
.stat-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:var(--af-teal);transition:height .3s var(--ease-apple)}
.stat-card:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}
.stat-card:hover::before{height:4px}
.stat-card.success{background:var(--af-ok-bg);border-color:var(--af-ok-border)}
.stat-card.success::before{background:linear-gradient(90deg,#34D399 0%,var(--af-ok) 100%)}
.stat-card.success .stat-value{color:var(--af-ok-dark)}
.stat-card.warning{background:var(--af-warn-bg);border-color:var(--af-warn-border)}
.stat-card.warning::before{background:linear-gradient(90deg,#FBBF24 0%,var(--af-warn) 100%)}
.stat-card.warning .stat-value{color:var(--af-warn-dark)}
.stat-card.danger{background:var(--af-err-bg);border-color:var(--af-err-border)}
.stat-card.danger::before{background:linear-gradient(90deg,#F87171 0%,var(--af-err) 100%)}
.stat-card.danger .stat-value{color:var(--af-err-dark)}
.stat-value{font-size:30px;font-weight:800;color:var(--ink);letter-spacing:-.5px;line-height:1.1;animation:numberPop .5s var(--ease-apple) both}
.stat-label{font-size:11px;color:var(--ink-muted);margin-top:8px;font-weight:600;letter-spacing:.02em;text-transform:uppercase}

/* V2 stat card with border-left accent */
.v2-stat-left{border-left:4px solid var(--af-teal)}
.v2-stat-left--ok{border-left-color:var(--af-ok)}
.v2-stat-left--warn{border-left-color:var(--af-warn)}
.v2-stat-left--err{border-left-color:var(--af-err)}

/* Global stats for multi-site */
.global-stats-banner{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:14px;margin-bottom:20px}
.global-stat{background:#fff;border:1px solid var(--border);border-radius:var(--radius);padding:20px;text-align:center;box-shadow:var(--shadow-card);transition:all .25s var(--ease)}
.global-stat:hover{transform:translateY(-2px);box-shadow:var(--shadow-card-hover)}
.global-stat .gs-value{font-size:30px;font-weight:800;color:var(--ink);letter-spacing:-.5px}
.global-stat .gs-label{font-size:10px;color:var(--ink-muted);margin-top:6px;text-transform:uppercase;letter-spacing:.5px;font-weight:700}
.global-stat.gs-danger .gs-value{color:var(--af-err)}
.global-stat.gs-warning .gs-value{color:var(--af-warn)}
.global-stat.gs-success .gs-value{color:var(--af-ok)}

/* ══════════════════════════════════════════
   SITE OVERVIEW CARDS — Multi-site dashboard
   ══════════════════════════════════════════ */
.site-overview-card{background:#fff;border:1px solid var(--border);border-radius:var(--radius);padding:22px var(--card-pad);margin-bottom:14px;cursor:pointer;transition:all .25s var(--ease);box-shadow:var(--shadow-sm);-webkit-tap-highlight-color:transparent;position:relative;overflow:hidden}
.site-overview-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:var(--af-teal)}
.site-overview-card:hover{box-shadow:var(--shadow-card-hover);transform:translateY(-3px)}
.site-overview-card:active{transform:scale(.99)}
.site-overview-card .site-card-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px;flex-wrap:wrap;gap:8px}
.site-overview-card .site-card-title{font-size:15px;font-weight:700;color:var(--ink);display:flex;align-items:center;gap:8px;letter-spacing:-.02em}
.site-overview-card .site-card-badges{display:flex;gap:6px;flex-wrap:wrap}
.site-overview-card .mini-stats{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
.site-overview-card .mini-stat{text-align:center;padding:12px 8px;background:var(--bg-off);border-radius:var(--radius-sm);transition:background var(--transition-fast)}
.site-overview-card .mini-stat-value{font-size:18px;font-weight:800;color:var(--ink)}
.site-overview-card .mini-stat-label{font-size:9px;color:var(--ink-muted);margin-top:4px;font-weight:600}
.site-overview-card .mini-stat.ok{background:var(--af-ok-bg)}
.site-overview-card .mini-stat.warn{background:var(--af-warn-bg)}
.site-overview-card .mini-stat.bad{background:var(--af-err-bg)}

/* ══════════════════════════════════════════
   LISTS — Clean item rows
   ══════════════════════════════════════════ */
.list-item{display:flex;align-items:center;gap:14px;padding:16px 20px;border-bottom:1px solid var(--border-light);transition:background var(--transition-fast)}
.list-item:last-child{border-bottom:none}
.list-item:hover{background:var(--bg-off)}
.list-icon{width:42px;height:42px;border-radius:var(--radius-sm);display:flex;align-items:center;justify-content:center;font-size:18px;flex-shrink:0}
.list-content{flex:1;min-width:0}
.list-title{font-weight:600;font-size:14px;color:var(--ink);letter-spacing:-.01em}
.list-sub{font-size:12px;color:var(--ink-muted);margin-top:3px;font-weight:500}
.list-actions{display:flex;gap:8px;flex-shrink:0;flex-wrap:wrap}

/* ══════════════════════════════════════════
   BADGES — Pill shaped status indicators
   ══════════════════════════════════════════ */
.badge{display:inline-flex;align-items:center;padding:4px 10px;border-radius:var(--radius-pill);font-size:11px;font-weight:600;letter-spacing:.01em;gap:4px}
.badge-green{background:rgba(16,185,129,.1);color:var(--af-ok-dark);border:1px solid rgba(16,185,129,.2)}
.badge-yellow{background:rgba(245,158,11,.1);color:var(--af-warn-dark);border:1px solid rgba(245,158,11,.2)}
.badge-red{background:rgba(239,68,68,.1);color:var(--af-err-dark);border:1px solid rgba(239,68,68,.2)}
.badge-blue{background:rgba(59,130,246,.1);color:var(--af-info-dark);border:1px solid rgba(59,130,246,.2)}
.badge-gray{background:rgba(100,116,139,.08);color:var(--ink-muted);border:1px solid rgba(100,116,139,.15)}

/* ══════════════════════════════════════════
   TABS — Section switcher
   ══════════════════════════════════════════ */
.tabs{display:flex;gap:0;border-bottom:2px solid var(--border-light);margin-bottom:24px;overflow-x:auto;-webkit-overflow-scrolling:touch}
.tab{padding:12px 20px;font-size:14px;font-weight:600;cursor:pointer;border:none;background:none;color:var(--ink-muted);white-space:nowrap;transition:all var(--transition);border-bottom:2px solid transparent;margin-bottom:-2px}
.tab:hover{color:var(--ink-secondary)}
.tab.active{color:var(--af-teal);border-bottom-color:var(--af-teal);font-weight:700}

/* ══════════════════════════════════════════
   FILTERS — Pill toggles
   ══════════════════════════════════════════ */
.filters{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:20px}
.filter-btn{padding:8px 16px;border-radius:var(--radius-pill);font-size:13px;font-weight:600;cursor:pointer;border:1.5px solid var(--border);background:#fff;color:var(--ink-muted);transition:all var(--transition)}
.filter-btn:hover{border-color:#CBD5E1;background:var(--bg-off)}
.filter-btn.active{background:var(--af-teal);color:#fff;border-color:transparent;box-shadow:var(--shadow-teal)}

/* ══════════════════════════════════════════
   PHOTO & FILE UPLOAD
   ══════════════════════════════════════════ */
.photo-box{border:2px dashed var(--border);border-radius:var(--radius);padding:28px;text-align:center;cursor:pointer;transition:all var(--transition);background:var(--bg-off)}
.photo-box:hover{border-color:var(--af-teal);background:var(--af-teal-bg);transform:translateY(-1px)}
.photo-box .photo-icon{font-size:32px;margin-bottom:8px}
.photo-box .photo-text{font-size:14px;font-weight:700;color:var(--ink)}
.photo-box .photo-hint{font-size:12px;color:var(--ink-muted);margin-top:4px;font-weight:500}
.photo-preview{max-width:100%;max-height:200px;border-radius:var(--radius-sm);margin-bottom:8px}
.photo-result{margin-top:8px;padding:10px 14px;border-radius:var(--radius-sm);background:var(--af-ok-bg);font-size:12px;color:var(--af-ok-dark);font-weight:600}

/* ══════════════════════════════════════════
   SIGNATURE CANVAS
   ══════════════════════════════════════════ */
.sig-canvas{width:100%;height:200px;border:1.5px solid var(--border);border-radius:var(--radius);cursor:crosshair;touch-action:none;background:#fff;transition:border-color var(--transition)}
.sig-canvas:hover{border-color:var(--af-teal)}

/* ══════════════════════════════════════════
   MODAL — Glassmorphism overlay with blur 4px
   ══════════════════════════════════════════ */
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.3);backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:1000;padding:16px;opacity:0;pointer-events:none;transition:opacity .3s var(--ease-apple)}
.modal-overlay.show{opacity:1;pointer-events:auto}
.modal{background:#fff;border-radius:var(--radius-lg);width:100%;max-width:520px;max-height:90vh;max-height:90dvh;overflow-y:auto;box-shadow:var(--shadow-xl);animation:scaleIn .3s var(--ease-apple);border:1px solid var(--border)}
.modal-header{padding:20px var(--card-pad);border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
.modal-title{font-size:17px;font-weight:700;color:var(--ink);letter-spacing:-.02em}
.modal-close{background:none;border:none;font-size:20px;cursor:pointer;color:var(--muted);padding:6px;width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:var(--radius-sm);transition:all var(--transition-fast)}
.modal-close:hover{background:var(--bg-off);color:var(--ink)}
.modal-body{padding:var(--card-pad)}
.modal-footer{padding:16px var(--card-pad);border-top:1px solid var(--border);display:flex;justify-content:flex-end;gap:10px;background:var(--bg-off)}

/* ══════════════════════════════════════════
   EMPTY STATES
   ══════════════════════════════════════════ */
.empty{text-align:center;padding:48px 24px}
.empty-icon{font-size:56px;margin-bottom:16px;opacity:.8}
.empty-title{font-size:16px;font-weight:700;color:var(--ink);margin-bottom:8px;letter-spacing:-.02em}
.empty-text{font-size:14px;color:var(--ink-muted);font-weight:500;line-height:1.6}

/* ══════════════════════════════════════════
   TOGGLE SWITCH
   ══════════════════════════════════════════ */
.toggle{position:relative;width:48px;height:26px;cursor:pointer;display:inline-block}
.toggle input{opacity:0;width:0;height:0}
.toggle-slider{position:absolute;inset:0;background:#CBD5E1;border-radius:13px;transition:all .3s var(--ease-apple)}
.toggle-slider::before{content:'';position:absolute;width:20px;height:20px;border-radius:50%;background:#fff;left:3px;top:3px;transition:all .3s var(--ease-apple);box-shadow:0 1px 3px rgba(0,0,0,.15),0 1px 1px rgba(0,0,0,.06)}
.toggle input:checked+.toggle-slider{background:var(--af-teal)}
.toggle input:checked+.toggle-slider::before{transform:translateX(22px);box-shadow:0 1px 3px rgba(109,197,224,.3),0 1px 1px rgba(0,0,0,.06)}

/* ══════════════════════════════════════════
   PROGRESS BAR
   ══════════════════════════════════════════ */
.progress{height:8px;background:rgba(0,0,0,.06);border-radius:6px;overflow:hidden}
.progress-bar{height:100%;border-radius:6px;transition:width .8s var(--ease-apple);position:relative}
.progress-bar::after{content:'';position:absolute;inset:0;background:linear-gradient(90deg,transparent,rgba(255,255,255,.25),transparent);animation:shimmer 2s ease infinite;background-size:200% 100%}

/* ══════════════════════════════════════════
   LOADING SPINNER
   ══════════════════════════════════════════ */
.loading{display:inline-block;width:18px;height:18px;border:2.5px solid rgba(0,0,0,.08);border-top-color:var(--af-teal);border-radius:50%;animation:spin .8s cubic-bezier(.4,.2,.6,.8) infinite}

/* ══════════════════════════════════════════
   DATA TABLE — 14px padding, zebra, row hover
   ══════════════════════════════════════════ */
.data-table{width:100%;border-collapse:collapse}
.data-table th{font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:var(--ink-muted);padding:12px 14px;text-align:left;border-bottom:2px solid var(--border);background:var(--bg-off)}
.data-table td{padding:14px;border-bottom:1px solid var(--border-light);font-size:13px;font-weight:500}
.data-table tr:nth-child(even) td{background:var(--bg-off)}
.data-table tr:hover td{background:rgba(109,197,224,.03)}

/* ══════════════════════════════════════════
   BOTTOM NAVIGATION — 64px, mobile
   ══════════════════════════════════════════ */
.bottom-nav{display:none;position:fixed;bottom:0;left:0;right:0;background:#fff;border-top:1px solid var(--border);z-index:200;padding:0 0 env(safe-area-inset-bottom,0);box-shadow:0 -1px 3px rgba(0,0,0,.04)}
.bottom-nav-inner{display:flex;justify-content:stretch;align-items:stretch;max-width:560px;margin:0 auto;height:var(--bottomnav-h)}
.bnav-item{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px;flex:1;cursor:pointer;border:none;background:none;color:var(--ink-muted);font-size:11px;font-weight:600;transition:all var(--transition-fast);position:relative;-webkit-tap-highlight-color:transparent;border-radius:0;letter-spacing:-.01em}
.bnav-item .bnav-icon{font-size:24px;line-height:1;transition:transform var(--transition-fast)}
.bnav-item.active{color:var(--af-teal);background:var(--af-teal-bg)}
.bnav-item.active::before{content:'';position:absolute;top:0;left:50%;transform:translateX(-50%);width:32px;height:3px;background:var(--af-teal);border-radius:0 0 4px 4px}
.bnav-item.active .bnav-icon{transform:scale(1.12)}
.bnav-item:active{background:var(--af-teal-bg)}
.bnav-item+.bnav-item{border-left:1px solid var(--border-light)}
.bnav-badge{position:absolute;top:8px;right:calc(50% - 22px);background:var(--af-err);color:#fff;font-size:9px;min-width:16px;height:16px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-weight:700;box-shadow:0 2px 4px rgba(239,68,68,.3);animation:pulse 2s infinite}

/* More menu */
.bnav-more-menu{position:fixed;bottom:calc(var(--bottomnav-h) + 8px);left:10px;right:10px;background:#fff;border-radius:var(--radius-lg);border:1px solid var(--border);box-shadow:var(--shadow-2xl);z-index:201;padding:8px;max-height:65vh;overflow-y:auto;animation:slideInUp .2s var(--ease)}
.bnav-more-menu .bnav-menu-item{display:flex;align-items:center;gap:14px;padding:14px 16px;border-radius:var(--radius-sm);cursor:pointer;font-size:15px;font-weight:600;color:var(--ink);-webkit-tap-highlight-color:transparent;transition:background var(--transition-fast)}
.bnav-more-menu .bnav-menu-item:active{background:var(--bg-off)}
.bnav-more-menu .bnav-menu-icon{font-size:20px;width:28px;text-align:center}
.bnav-more-menu .bnav-menu-section{font-size:10px;font-weight:700;color:var(--ink-muted);text-transform:uppercase;letter-spacing:1.2px;padding:14px 16px 6px}
.bnav-more-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.2);z-index:200;display:none;backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px)}
.bnav-more-backdrop.show{display:block}

/* ══════════════════════════════════════════
   TIMELINE — Ma Journee
   ══════════════════════════════════════════ */
.timeline{position:relative;padding-left:32px;margin-top:8px}
.timeline::before{content:'';position:absolute;left:13px;top:0;bottom:0;width:2px;background:linear-gradient(180deg,var(--af-teal) 0%,var(--border) 100%);border-radius:1px}
.tl-item{position:relative;margin-bottom:14px;animation:fadeIn .4s var(--ease) both}
.tl-item:nth-child(1){animation-delay:.05s}
.tl-item:nth-child(2){animation-delay:.1s}
.tl-item:nth-child(3){animation-delay:.15s}
.tl-item:nth-child(4){animation-delay:.2s}
.tl-item:nth-child(5){animation-delay:.25s}
.tl-item:nth-child(6){animation-delay:.3s}
.tl-dot{position:absolute;left:-32px;top:8px;width:16px;height:16px;border-radius:50%;border:3px solid #fff;box-shadow:0 0 0 2px var(--border)}
.tl-dot.done{background:var(--af-ok);box-shadow:0 0 0 2px var(--af-ok),0 2px 6px rgba(16,185,129,.25)}
.tl-dot.warn{background:var(--af-warn);box-shadow:0 0 0 2px var(--af-warn),0 2px 6px rgba(245,158,11,.25)}
.tl-dot.danger{background:var(--af-err);box-shadow:0 0 0 2px var(--af-err),0 2px 6px rgba(239,68,68,.25)}
.tl-dot.pending{background:var(--border);box-shadow:0 0 0 2px var(--border)}
.tl-dot.info{background:var(--af-teal);box-shadow:0 0 0 2px var(--af-teal),0 2px 6px rgba(109,197,224,.25)}
.tl-card{background:#fff;border:1px solid var(--border);border-radius:var(--radius);padding:16px 18px;cursor:pointer;transition:all var(--transition);box-shadow:var(--shadow-sm);-webkit-tap-highlight-color:transparent}
.tl-card:hover{box-shadow:var(--shadow-md);transform:translateY(-1px)}
.tl-card:active{transform:scale(.99)}
.tl-card-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:4px;gap:8px}
.tl-card-title{font-weight:700;font-size:14px;color:var(--ink);display:flex;align-items:center;gap:8px;letter-spacing:-.01em}
.tl-card-sub{font-size:12px;color:var(--ink-muted);font-weight:500}

/* ══════════════════════════════════════════
   V2 UTILITY CLASSES — 80+ helpers
   ══════════════════════════════════════════ */

/* -- Layout -- */
.v2-flex{display:flex}
.v2-flex-col{display:flex;flex-direction:column}
.v2-flex-center{display:flex;align-items:center;justify-content:center}
.v2-flex-between{display:flex;align-items:center;justify-content:space-between}
.v2-flex-wrap{flex-wrap:wrap}
.v2-flex-1{flex:1;min-width:0}
.v2-items-center{align-items:center}
.v2-items-start{align-items:flex-start}
.v2-justify-end{justify-content:flex-end}
.v2-grid-2{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.v2-grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
.v2-grid-4{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}
.v2-inline{display:inline-flex;align-items:center}

/* -- Gaps -- */
.v2-gap-4{gap:4px}
.v2-gap-6{gap:6px}
.v2-gap-8{gap:8px}
.v2-gap-10{gap:10px}
.v2-gap-12{gap:12px}
.v2-gap-14{gap:14px}
.v2-gap-16{gap:16px}
.v2-gap-20{gap:20px}
.v2-gap-24{gap:24px}

/* -- Spacing (margin/padding) -- */
.v2-mt-0{margin-top:0}.v2-mt-4{margin-top:4px}.v2-mt-6{margin-top:6px}.v2-mt-8{margin-top:8px}.v2-mt-10{margin-top:10px}.v2-mt-12{margin-top:12px}.v2-mt-14{margin-top:14px}.v2-mt-16{margin-top:16px}.v2-mt-18{margin-top:18px}.v2-mt-20{margin-top:20px}.v2-mt-24{margin-top:24px}
.v2-mb-0{margin-bottom:0}.v2-mb-4{margin-bottom:4px}.v2-mb-6{margin-bottom:6px}.v2-mb-8{margin-bottom:8px}.v2-mb-10{margin-bottom:10px}.v2-mb-12{margin-bottom:12px}.v2-mb-14{margin-bottom:14px}.v2-mb-16{margin-bottom:16px}.v2-mb-18{margin-bottom:18px}.v2-mb-20{margin-bottom:20px}.v2-mb-22{margin-bottom:22px}.v2-mb-24{margin-bottom:24px}
.v2-ml-auto{margin-left:auto}.v2-mr-auto{margin-right:auto}.v2-mr-4{margin-right:4px}.v2-mr-6{margin-right:6px}.v2-mr-8{margin-right:8px}.v2-mr-12{margin-right:12px}
.v2-p-0{padding:0}.v2-p-8{padding:8px}.v2-p-10{padding:10px}.v2-p-12{padding:12px}.v2-p-14{padding:14px}.v2-p-16{padding:16px}.v2-p-18{padding:18px}.v2-p-20{padding:20px}.v2-p-24{padding:24px}.v2-p-36{padding:36px}
.v2-px-12{padding-left:12px;padding-right:12px}.v2-px-14{padding-left:14px;padding-right:14px}
.v2-py-8{padding-top:8px;padding-bottom:8px}.v2-py-10{padding-top:10px;padding-bottom:10px}

/* -- Typography -- */
.v2-text-xs{font-size:11px}.v2-text-sm{font-size:12px}.v2-text-base{font-size:13px}.v2-text-md{font-size:14px}.v2-text-lg{font-size:15px}.v2-text-xl{font-size:16px}.v2-text-2xl{font-size:18px}.v2-text-3xl{font-size:20px}.v2-text-4xl{font-size:24px}.v2-text-5xl{font-size:28px}.v2-text-6xl{font-size:32px}
.v2-font-400{font-weight:400}.v2-font-500{font-weight:500}.v2-font-600{font-weight:600}.v2-font-700{font-weight:700}.v2-font-800{font-weight:800}
.v2-text-center{text-align:center}.v2-text-right{text-align:right}
.v2-text-ink{color:var(--ink)}.v2-text-ink-secondary{color:var(--ink-secondary)}.v2-text-muted{color:var(--muted)}.v2-text-ink-muted{color:var(--ink-muted)}
.v2-text-ok{color:var(--af-ok)}.v2-text-ok-dark{color:var(--af-ok-dark)}
.v2-text-warn{color:var(--af-warn)}.v2-text-warn-dark{color:var(--af-warn-dark)}
.v2-text-err{color:var(--af-err)}.v2-text-err-dark{color:var(--af-err-dark)}
.v2-text-teal{color:var(--af-teal)}.v2-text-teal-dark{color:var(--af-teal-dark)}
.v2-text-white{color:#fff}
.v2-tracking-wide{letter-spacing:1px}.v2-tracking-wider{letter-spacing:2px}
.v2-uppercase{text-transform:uppercase}
.v2-line-through{text-decoration:line-through}
.v2-truncate{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.v2-mono{font-family:monospace}

/* -- Colors & backgrounds -- */
.v2-bg-ok{background:var(--af-ok-bg)}.v2-bg-warn{background:var(--af-warn-bg)}.v2-bg-err{background:var(--af-err-bg)}.v2-bg-info{background:var(--af-info-bg)}
.v2-bg-teal{background:var(--af-teal-bg)}.v2-bg-off{background:var(--bg-off)}.v2-bg-white{background:#fff}
.v2-bg-ok-solid{background:var(--af-ok)}.v2-bg-warn-solid{background:var(--af-warn)}.v2-bg-err-solid{background:var(--af-err)}.v2-bg-teal-solid{background:var(--af-teal)}

/* -- Borders -- */
.v2-border{border:1px solid var(--border)}.v2-border-b{border-bottom:1px solid var(--border)}.v2-border-t{border-top:1px solid var(--border)}
.v2-border-light{border:1px solid var(--border-light)}.v2-border-b-light{border-bottom:1px solid var(--border-light)}
.v2-rounded{border-radius:var(--radius)}.v2-rounded-sm{border-radius:var(--radius-sm)}.v2-rounded-lg{border-radius:var(--radius-lg)}.v2-rounded-full{border-radius:var(--radius-pill)}
.v2-border-left-ok{border-left:4px solid var(--af-ok)}.v2-border-left-warn{border-left:4px solid var(--af-warn)}.v2-border-left-err{border-left:4px solid var(--af-err)}.v2-border-left-teal{border-left:4px solid var(--af-teal)}.v2-border-left-info{border-left:4px solid var(--af-info)}
.v2-border-left-3-ok{border-left:3px solid var(--af-ok)}.v2-border-left-3-warn{border-left:3px solid var(--af-warn)}.v2-border-left-3-err{border-left:3px solid var(--af-err)}.v2-border-left-3-teal{border-left:3px solid var(--af-teal)}
.v2-border-bottom-2-teal{border-bottom:2px solid var(--af-teal)}.v2-border-bottom-2-ok{border-bottom:2px solid var(--af-ok)}

/* -- Shadows -- */
.v2-shadow-sm{box-shadow:var(--shadow-sm)}.v2-shadow-md{box-shadow:var(--shadow-md)}.v2-shadow-lg{box-shadow:var(--shadow-lg)}

/* -- Sizes -- */
.v2-w-full{width:100%}.v2-w-120{width:120px}.v2-w-140{width:140px}.v2-w-200{width:200px}
.v2-max-w-300{max-width:300px}.v2-max-w-500{max-width:500px}
.v2-h-6{height:6px}.v2-h-8{height:8px}.v2-h-10{height:10px}
.v2-min-w-200{min-width:200px}

/* -- Display -- */
.v2-hidden{display:none}.v2-block{display:block}
.v2-overflow-hidden{overflow:hidden}
.v2-cursor-pointer{cursor:pointer}
.v2-opacity-50{opacity:.5}
.v2-pointer-events-none{pointer-events:none}

/* -- Special components -- */
.v2-card--danger-left{border-left:4px solid var(--af-err)}
.v2-card--warn-left{border-left:4px solid var(--af-warn)}
.v2-card--teal-left{border-left:4px solid var(--af-teal)}
.v2-card--ok-left{border-left:4px solid var(--af-ok)}
.v2-card--info-left{border-left:4px solid var(--af-info)}

/* V2 Alert inline */
.v2-alert-inline{padding:10px 14px;border-radius:var(--radius-sm);font-size:13px;font-weight:600}
.v2-alert-inline--ok{background:var(--af-ok-bg);color:var(--af-ok-dark)}
.v2-alert-inline--warn{background:var(--af-warn-bg);color:var(--af-warn-dark)}
.v2-alert-inline--err{background:var(--af-err-bg);color:var(--af-err-dark)}
.v2-alert-inline--info{background:var(--af-info-bg);color:var(--af-info-dark)}
.v2-alert-inline--teal{background:var(--af-teal-bg);color:var(--af-teal-dark)}

/* V2 OCR status */
.v2-ocr-status{padding:10px 14px;border-radius:var(--radius);font-size:12px;font-weight:600;display:flex;align-items:center;gap:8px;margin-top:8px}
.v2-ocr-status--success{background:var(--af-ok-bg);color:var(--af-ok-dark)}
.v2-ocr-status--error{background:var(--af-err-bg);color:var(--af-err-dark)}
.v2-ocr-status--loading{background:var(--af-teal-bg);color:var(--af-teal-dark);position:relative;overflow:hidden}
.v2-ocr-status--loading::after{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(8,145,178,.12),transparent);animation:ocrScan 1.5s ease-in-out infinite}
@keyframes ocrScan{0%{left:-100%}100%{left:100%}}
.v2-ocr-status--info{background:var(--af-warn-bg);color:var(--af-warn-dark)}

/* Photo scan overlay during OCR */
.photo-scanning{position:relative}
.photo-scanning::after{content:'';position:absolute;top:0;left:0;right:0;bottom:0;border-radius:var(--radius-sm);background:linear-gradient(180deg,transparent 40%,rgba(8,145,178,.15) 50%,transparent 60%);background-size:100% 200%;animation:photoScan 2s ease-in-out infinite}
@keyframes photoScan{0%{background-position:0 0}100%{background-position:0 -200%}}

/* V2 Password strength */
.v2-pwd-strength{font-size:12px;margin-top:6px;font-weight:600}
.v2-pwd-strength--ok{color:var(--af-ok)}
.v2-pwd-strength--err{color:var(--af-err)}

/* V2 Avatar */
.v2-avatar{display:flex;align-items:center;justify-content:center;border-radius:50%;font-weight:800;flex-shrink:0}
.v2-avatar--sm{width:36px;height:36px;font-size:12px}
.v2-avatar--md{width:48px;height:48px;font-size:16px}
.v2-avatar--lg{width:64px;height:64px;font-size:24px}
.v2-avatar--teal{background:var(--af-teal-bg);color:var(--af-teal)}

/* V2 Login ID display */
.v2-login-id{padding:10px 14px;background:var(--bg-off);border-radius:var(--radius-sm);font-size:16px;font-weight:700;letter-spacing:2px;color:var(--af-teal)}

/* V2 info callout */
.v2-callout{padding:14px;border-radius:var(--radius-sm);font-size:13px;line-height:1.5}
.v2-callout--ok{background:var(--af-ok-bg);color:var(--af-ok-dark)}
.v2-callout--info{background:var(--af-teal-bg);color:var(--af-teal-dark)}
.v2-callout--warn{background:var(--af-warn-bg);color:var(--af-warn-dark)}

/* V2 User/Team card */
.v2-user-card{background:#fff;border-radius:var(--radius);padding:18px;margin-bottom:12px;border:1px solid var(--border)}
.v2-user-badge{display:inline-block;background:var(--af-teal);color:#fff;padding:2px 10px;border-radius:20px;font-size:12px;font-weight:700;letter-spacing:1px}
.v2-site-badge{font-size:12px;background:none;border:none;cursor:pointer;color:var(--af-err);font-weight:bold;margin-left:4px}

/* V2 Supplier group */
.v2-supplier-group{margin-bottom:22px}
.v2-supplier-group__header{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px;padding-bottom:10px}
.v2-supplier-group__title{margin:0;font-size:16px;font-weight:800;display:flex;align-items:center;gap:8px}
.v2-supplier-group__icon{font-size:20px}
.v2-order-row{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px solid var(--border-light);flex-wrap:wrap;gap:8px}
.v2-order-row:last-child{border-bottom:none}
.v2-order-name{font-size:14px;font-weight:600}
.v2-order-meta{font-size:12px;color:var(--muted);font-weight:500;margin-top:2px}
.v2-order-qty{color:var(--muted);font-size:13px;margin-left:8px;font-weight:500}
.v2-order-note{color:var(--muted);font-size:12px;margin-left:6px;font-weight:500}
.v2-order-actions{display:flex;gap:6px;align-items:center}

/* V2 Temperature status */
.v2-temp-validated{margin-top:14px;text-align:center;padding:14px;background:var(--af-ok-bg);border-radius:var(--radius);color:var(--af-ok-dark);font-weight:800;font-size:15px}
.v2-temp-pct{font-size:32px;font-weight:900;letter-spacing:-1px}
.v2-temp-pct--ok{color:var(--af-ok)}
.v2-temp-pct--teal{color:var(--af-teal)}

/* V2 Report info box */
.v2-report-info{display:flex;align-items:flex-start;gap:14px}
.v2-report-info__icon{width:40px;height:40px;background:var(--af-teal-bg);border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:20px;flex-shrink:0}

/* V2 Section title */
.v2-section-title{font-size:15px;font-weight:800;color:var(--ink);margin:0 0 12px;padding-bottom:10px;border-bottom:2px solid var(--af-teal-light);display:flex;align-items:center;gap:8px}
.v2-section-title--ok{border-bottom-color:var(--af-ok)}

/* V2 Collapsible */
.v2-collapsible-trigger{cursor:pointer}
.v2-collapsible-content{display:none}
.v2-collapsible-toggle{float:right;font-size:12px;color:var(--muted)}

/* V2 Progress circle */
.v2-progress-circle{width:42px;height:42px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:800;border:3px solid}
.v2-progress-circle--ok{border-color:var(--af-ok);color:var(--af-ok)}
.v2-progress-circle--teal{border-color:var(--af-teal);color:var(--af-teal)}

/* V2 Inline select (for site-management, team, user-management) */
.v2-inline-select{padding:4px 8px;border-radius:6px;border:1px solid var(--border);font-size:13px;background:#fff}

/* V2 form disabled appearance */
.v2-input-disabled{background:var(--bg-off);cursor:not-allowed;opacity:.7}

/* V2 Profile header */
.v2-profile-header{display:flex;align-items:center;gap:16px;margin-bottom:24px}
.v2-profile-role{display:flex;align-items:center;gap:8px;margin-top:4px}

/* V2 settings Claude key status */
.v2-key-status{padding:8px 12px;border-radius:var(--radius);font-size:12px;font-weight:600;margin-bottom:8px}
.v2-key-status--ok{background:var(--af-ok-bg);color:var(--af-ok-dark)}
.v2-key-status--empty{background:var(--af-warn-bg);color:var(--af-warn-dark)}

/* V2 Notification styles */
.v2-notif-summary{margin-bottom:22px}
.v2-notif-stat{display:flex;align-items:center;gap:10px;margin-bottom:8px}
.v2-notif-stat__icon{font-size:24px}
.v2-notif-empty{color:var(--af-err-dark);padding:18px;font-weight:600}

/* V2 Loading screen */
.v2-loading-screen{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;gap:16px;background:var(--af-bg-page)}
.v2-loading-screen .loading{width:36px;height:36px;border-width:3px}
.v2-loading-screen span{color:var(--muted);font-size:15px;font-weight:600}

/* V2 No-sites screen */
.v2-no-sites{display:flex;align-items:center;justify-content:center;min-height:100vh;background:var(--af-bg-page)}

/* ══════════════════════════════════════════
   V3 PREMIUM COMPONENTS — Apple-inspired
   ══════════════════════════════════════════ */

/* SVG Progress Ring */
.progress-ring{transform:rotate(-90deg)}
.progress-ring__bg{fill:none;stroke:rgba(0,0,0,.06);stroke-width:5}
.progress-ring__fill{fill:none;stroke:var(--af-teal);stroke-width:5;stroke-linecap:round;transition:stroke-dashoffset 1s var(--ease-apple);animation:ringReveal 1.2s var(--ease-apple) both}
.progress-ring__fill--ok{stroke:var(--af-ok)}
.progress-ring__fill--warn{stroke:var(--af-warn)}
.progress-ring__fill--err{stroke:var(--af-err)}

/* Animated stat number */
.stat-animated{animation:numberPop .6s var(--ease-apple) both}
.stat-animated:nth-child(1){animation-delay:.1s}
.stat-animated:nth-child(2){animation-delay:.2s}
.stat-animated:nth-child(3){animation-delay:.3s}
.stat-animated:nth-child(4){animation-delay:.4s}

/* Glass card variant */
.card-glass{background:rgba(255,255,255,.7);backdrop-filter:saturate(180%) blur(20px);-webkit-backdrop-filter:saturate(180%) blur(20px);border:1px solid rgba(255,255,255,.3)}

/* Clickable card with Apple-style press */
.v2-clickable{cursor:pointer;-webkit-tap-highlight-color:transparent}
.v2-clickable:active{transform:scale(.98);transition-duration:.1s}

/* Section divider */
.v3-divider{height:1px;background:linear-gradient(90deg,transparent,rgba(0,0,0,.06),transparent);margin:24px 0}

/* Greeting select (site switcher in banner) */
.v2-greeting-select{padding:8px 16px;border:1.5px solid var(--border);border-radius:var(--radius-pill);font-size:12px;font-weight:600;background:#fff;color:var(--ink);cursor:pointer;transition:all .25s var(--ease-apple)}
.v2-greeting-select:hover{background:var(--bg-off);border-color:var(--af-teal)}
.v2-greeting-select:focus{border-color:var(--af-teal);box-shadow:0 0 0 3px rgba(8,145,178,.1)}

/* Timeline alert items */
.v2-tl-alert{padding:6px 10px;border-radius:var(--radius-sm);font-size:12px;font-weight:600;margin-top:6px}
.v2-tl-alert--actions{display:flex;align-items:center;justify-content:space-between;gap:8px;flex-wrap:wrap}
.v2-tl-alert-btns{display:flex;gap:6px;flex-shrink:0;margin-left:auto}
.v2-tl-alert-btns .btn-sm{font-size:11px;min-height:28px;padding:4px 10px}
.v2-tl-alert--danger{background:rgba(239,68,68,.06);color:var(--af-err-dark)}
.v2-tl-alert--warning{background:rgba(245,158,11,.06);color:var(--af-warn-dark)}

/* V3 progress variants */
.v2-progress-lg{height:10px;border-radius:6px}
.v2-progress-sm{height:6px;border-radius:4px}
.v2-progress-xs{height:4px;border-radius:3px}

/* Radial percentage badge */
.v2-radial-pct{font-size:13px;font-weight:800;padding:6px 10px;border-radius:var(--radius-sm);animation:numberPop .5s var(--ease-apple) both}
.v2-radial-pct--ok{color:var(--af-ok);background:rgba(16,185,129,.08)}
.v2-radial-pct--primary{color:var(--af-teal);background:rgba(109,197,224,.08)}

/* Badge large */
.v2-badge-lg{padding:4px 12px;font-size:12px;font-weight:700}

/* Card header danger/warning variants */
.v2-card-header--danger{background:rgba(239,68,68,.04);border-bottom-color:rgba(239,68,68,.1)}
.v2-card-header--warning{background:rgba(245,158,11,.04);border-bottom-color:rgba(245,158,11,.1)}

/* Section heading (multi-site) */
.v2-section-heading{font-size:16px;font-weight:800;color:var(--ink);letter-spacing:-.03em;margin:0}

/* List item bordered variant */
.v2-list-item--bordered{border-bottom:1px solid rgba(0,0,0,.04)}

/* List icon danger */
.v2-list-icon--danger{background:rgba(239,68,68,.08);border-radius:var(--radius-sm)}

/* Padding top helper */
.v2-pt-12{padding-top:12px}

/* Text helpers */
.v2-text-primary{color:var(--af-teal)}
.v2-text-danger{color:var(--af-err)}
.v2-text-warning{color:var(--af-warn)}

/* Card body compact */
.v2-card-body--compact{padding:18px var(--card-pad)}

/* Margin bottom 18 */
.v2-mb-18{margin-bottom:18px}

/* ══════════════════════════════════════════
   MISSING V2/V3 CLASSES — Referenced in pages
   ══════════════════════════════════════════ */

/* List item border-left status variants */
.v2-list-item--border-left-ok{border-left:4px solid var(--af-ok)}
.v2-list-item--border-left-nok{border-left:4px solid var(--af-err)}
.v2-list-item--border-left-warning{border-left:4px solid var(--af-warn)}

/* List icon background variants */
.v2-list-icon--primary{background:rgba(109,197,224,.08);border-radius:var(--radius-sm)}
.v2-list-icon--ok{background:rgba(16,185,129,.08);border-radius:var(--radius-sm)}
.v2-list-icon--nok{background:rgba(239,68,68,.08);border-radius:var(--radius-sm)}
.v2-list-icon--warning{background:rgba(245,158,11,.08);border-radius:var(--radius-sm)}
.v2-list-icon--info{background:rgba(59,130,246,.08);border-radius:var(--radius-sm)}

/* Card left-border aliases (matching JS naming) */
.v2-card--success-left{border-left:4px solid var(--af-ok)}
.v2-card--primary-left{border-left:4px solid var(--af-teal)}
.v2-card--warning-left{border-left:4px solid var(--af-warn)}

/* Alert inline alias */
.v2-alert-inline--danger{background:var(--af-err-bg);color:var(--af-err-dark)}

/* Loading inline (centered spinner) */
.v2-loading-inline{display:flex;align-items:center;justify-content:center;padding:32px;gap:12px}

/* Login badge */
.v2-login-badge{display:inline-block;background:var(--af-teal-bg);color:var(--af-teal-dark);padding:3px 10px;border-radius:var(--radius-pill);font-size:12px;font-weight:700;letter-spacing:1.5px;font-family:'SF Mono','Fira Code',monospace}

/* Login preview (team form) */
.v2-login-preview{padding:12px 16px;background:var(--bg-off);border-radius:var(--radius-sm);font-size:16px;font-weight:800;letter-spacing:2px;color:var(--af-teal);min-height:var(--input-h);display:flex;align-items:center;border:1.5px solid var(--border)}

/* Signature preview */
.v2-signature-preview{display:flex;align-items:center;gap:14px;padding:14px;border:2px solid var(--af-ok);border-radius:var(--radius);background:var(--af-ok-bg)}

/* Font weight 900 */
.v2-font-900{font-weight:900}

/* Justify between (standalone) */
.v2-justify-between{justify-content:space-between}

/* Font mono */
.v2-font-mono{font-family:'SF Mono','Fira Code','Cascadia Code',monospace}

/* Order row components */
.v2-order-row__name{font-size:14px;font-weight:700;color:var(--ink)}
.v2-order-row__qty{color:var(--ink-muted);font-size:13px;margin-left:8px;font-weight:500}
.v2-order-row__note{color:var(--ink-muted);font-size:12px;margin-left:6px;font-weight:500;font-style:italic}
.v2-order-row__actions{display:flex;gap:6px;align-items:center;flex-shrink:0}

/* Margin top 2 */
.v2-mt-2{margin-top:2px}

/* ══════════════════════════════════════════
   DARK MODE — Apple-style
   ══════════════════════════════════════════ */
[data-theme="dark"]{
  --af-bg-page:#0F172A;
  --af-bg:#1E293B;
  --bg:#1E293B;
  --bg-off:#1A2332;
  --bg-page:#0F172A;
  --bg-warm:#1A2332;
  --surface-glass:rgba(30,41,59,.8);
  --surface-glass-heavy:rgba(30,41,59,.92);
  --ink:#F1F5F9;
  --ink-secondary:#CBD5E1;
  --ink-light:#94A3B8;
  --ink-muted:#64748B;
  --border:#334155;
  --border-light:#1E293B;
  --muted:#64748B;
  --sidebar-bg:#1E293B;
  --sidebar-surface:#0F172A;
  --sidebar-border:#334155;
  --sidebar-text:#94A3B8;
  --sidebar-text-bright:#F1F5F9;
  --sidebar-hover:rgba(255,255,255,.06);
  --sidebar-active:rgba(8,145,178,.15);
  --sidebar-active-text:#22D3EE;
  --af-teal-bg:rgba(109,197,224,.12);
  --af-ok-bg:rgba(16,185,129,.12);
  --af-warn-bg:rgba(245,158,11,.12);
  --af-err-bg:rgba(239,68,68,.12);
  --af-info-bg:rgba(59,130,246,.12);
  --shadow-sm:0 0.5px 1px rgba(0,0,0,.2),0 1px 3px rgba(0,0,0,.3);
  --shadow-md:0 1px 2px rgba(0,0,0,.2),0 3px 8px rgba(0,0,0,.3),0 6px 18px rgba(0,0,0,.2);
  --shadow-lg:0 2px 4px rgba(0,0,0,.2),0 8px 20px rgba(0,0,0,.3),0 16px 40px rgba(0,0,0,.2);
  --shadow-xl:0 4px 8px rgba(0,0,0,.2),0 12px 32px rgba(0,0,0,.4),0 24px 60px rgba(0,0,0,.3);
  --shadow-2xl:0 8px 16px rgba(0,0,0,.3),0 20px 48px rgba(0,0,0,.5),0 40px 80px rgba(0,0,0,.4);
  --shadow-card:0 0.5px 1px rgba(0,0,0,.15),0 2px 6px rgba(0,0,0,.2),0 4px 12px rgba(0,0,0,.15);
  --shadow-card-hover:0 2px 4px rgba(0,0,0,.2),0 8px 24px rgba(0,0,0,.35),0 16px 40px rgba(0,0,0,.2);
}

[data-theme="dark"] body{color:var(--ink)}
[data-theme="dark"] ::selection{background:rgba(109,197,224,.3)}

/* Dark cards */
[data-theme="dark"] .card{background:var(--af-bg);border-color:rgba(255,255,255,.06)}
[data-theme="dark"] .card-header{background:rgba(15,23,42,.4);border-bottom-color:rgba(255,255,255,.06)}
[data-theme="dark"] .card-footer{background:rgba(15,23,42,.4);border-top-color:rgba(255,255,255,.06)}

/* Dark forms */
[data-theme="dark"] .form-input,
[data-theme="dark"] .form-select,
[data-theme="dark"] .form-textarea{background:var(--bg-off);border-color:var(--border);color:var(--ink)}
[data-theme="dark"] .form-input:hover,
[data-theme="dark"] .form-select:hover,
[data-theme="dark"] .form-textarea:hover{border-color:#475569;background:#1E293B}
[data-theme="dark"] .form-input:focus,
[data-theme="dark"] .form-select:focus,
[data-theme="dark"] .form-textarea:focus{background:#1E293B;border-color:var(--af-teal);box-shadow:0 0 0 4px rgba(109,197,224,.15),0 0 0 1px rgba(109,197,224,.3)}
[data-theme="dark"] .form-input::placeholder,
[data-theme="dark"] .form-textarea::placeholder{color:#475569}

/* Dark header */
[data-theme="dark"] .main-header{background:#1E293B;border-bottom-color:var(--border)}
[data-theme="dark"] .main-header h1{color:var(--ink)}

/* Dark buttons ghost */
[data-theme="dark"] .btn-ghost{background:rgba(30,41,59,.8);color:var(--ink-secondary);border-color:var(--border)}
[data-theme="dark"] .btn-ghost:hover{background:var(--af-bg);border-color:#475569}

/* Dark stat cards */
[data-theme="dark"] .stat-card{background:var(--af-bg);border-color:rgba(255,255,255,.06)}
[data-theme="dark"] .stat-card.success{background:rgba(16,185,129,.08);border-color:rgba(16,185,129,.2)}
[data-theme="dark"] .stat-card.warning{background:rgba(245,158,11,.08);border-color:rgba(245,158,11,.2)}
[data-theme="dark"] .stat-card.danger{background:rgba(239,68,68,.08);border-color:rgba(239,68,68,.2)}
[data-theme="dark"] .stat-card.success .stat-value{color:#6EE7B7}
[data-theme="dark"] .stat-card.warning .stat-value{color:#FCD34D}
[data-theme="dark"] .stat-card.danger .stat-value{color:#FCA5A5}
[data-theme="dark"] .stat-value{color:var(--ink)}

/* Dark global stats */
[data-theme="dark"] .global-stat{background:var(--af-bg);border-color:var(--border)}
[data-theme="dark"] .global-stat .gs-value{color:var(--ink)}

/* Dark site overview cards */
[data-theme="dark"] .site-overview-card{background:var(--af-bg);border-color:var(--border)}
[data-theme="dark"] .site-overview-card .mini-stat{background:var(--bg-off)}

/* Dark lists */
[data-theme="dark"] .list-item{border-bottom-color:rgba(255,255,255,.04)}
[data-theme="dark"] .list-item:hover{background:rgba(255,255,255,.03)}

/* Dark badges */
[data-theme="dark"] .badge-green{background:rgba(16,185,129,.15);border-color:rgba(16,185,129,.25)}
[data-theme="dark"] .badge-yellow{background:rgba(245,158,11,.15);border-color:rgba(245,158,11,.25)}
[data-theme="dark"] .badge-red{background:rgba(239,68,68,.15);border-color:rgba(239,68,68,.25)}
[data-theme="dark"] .badge-blue{background:rgba(59,130,246,.15);border-color:rgba(59,130,246,.25)}
[data-theme="dark"] .badge-gray{background:rgba(100,116,139,.15);border-color:rgba(100,116,139,.25)}

/* Dark tabs */
[data-theme="dark"] .tabs{border-bottom-color:var(--border)}
[data-theme="dark"] .tab{color:var(--ink-muted)}
[data-theme="dark"] .tab:hover{color:var(--ink-secondary)}

/* Dark filters */
[data-theme="dark"] .filter-btn{background:var(--af-bg);border-color:var(--border);color:var(--ink-muted)}
[data-theme="dark"] .filter-btn:hover{background:rgba(255,255,255,.04);border-color:#475569}

/* Dark sidebar action buttons */
[data-theme="dark"] .sidebar-action-btn{background:rgba(255,255,255,.06);border-color:var(--border);color:var(--sidebar-text)}
[data-theme="dark"] .sidebar-action-btn:hover{background:rgba(255,255,255,.12);color:var(--sidebar-text-bright)}

/* Dark modal */
[data-theme="dark"] .modal-overlay{background:rgba(0,0,0,.5)}
[data-theme="dark"] .modal{background:var(--af-bg);border-color:var(--border)}
[data-theme="dark"] .modal-header{border-bottom-color:rgba(255,255,255,.06)}
[data-theme="dark"] .modal-footer{background:var(--bg-off);border-top-color:rgba(255,255,255,.06)}

/* Dark bottom nav */
[data-theme="dark"] .bottom-nav{background:#1E293B;border-top-color:var(--border);box-shadow:0 -1px 3px rgba(0,0,0,.2)}
[data-theme="dark"] .bnav-item{color:var(--ink-muted)}
[data-theme="dark"] .bnav-item+.bnav-item{border-left-color:rgba(255,255,255,.06)}
[data-theme="dark"] .bnav-item.active{background:rgba(8,145,178,.12)}

/* Dark more menu */
[data-theme="dark"] .bnav-more-menu{background:var(--af-bg);border-color:var(--border)}
[data-theme="dark"] .bnav-menu-item{color:var(--ink)}
[data-theme="dark"] .bnav-menu-item:active{background:rgba(255,255,255,.04)}

/* Dark toast */
[data-theme="dark"] .toast{background:rgba(30,41,59,.92)}

/* Dark progress */
[data-theme="dark"] .progress{background:rgba(255,255,255,.08)}

/* Dark toggle */
[data-theme="dark"] .toggle-slider{background:#475569}

/* Dark table */
[data-theme="dark"] .data-table th{background:var(--bg-off);border-bottom-color:var(--border);color:var(--ink-muted)}
[data-theme="dark"] .data-table td{border-bottom-color:rgba(255,255,255,.04)}
[data-theme="dark"] .data-table tr:nth-child(even) td{background:var(--bg-off)}
[data-theme="dark"] .data-table tr:hover td{background:rgba(109,197,224,.06)}

/* Dark photo box */
[data-theme="dark"] .photo-box{border-color:var(--border);background:var(--bg-off)}
[data-theme="dark"] .photo-box:hover{border-color:var(--af-teal);background:var(--af-teal-bg)}

/* Dark signature canvas */
[data-theme="dark"] .sig-canvas{background:var(--bg-off);border-color:var(--border)}

/* Dark quick actions */
[data-theme="dark"] .quick-action{background:var(--af-bg);border-color:rgba(255,255,255,.06)}
[data-theme="dark"] .quick-action:hover{background:var(--af-teal-bg);border-color:var(--af-teal)}
[data-theme="dark"] .quick-action .qa-label{color:var(--ink)}

/* Dark supplier group */
[data-theme="dark"] .v2-order-row{border-bottom-color:rgba(255,255,255,.04)}
[data-theme="dark"] .v2-supplier-group__header{border-bottom-color:rgba(255,255,255,.04)}

/* Dark callout */
[data-theme="dark"] .v2-callout--ok{background:rgba(16,185,129,.1);color:#6EE7B7}
[data-theme="dark"] .v2-callout--info{background:rgba(109,197,224,.1);color:#8FD5EA}
[data-theme="dark"] .v2-callout--warn{background:rgba(245,158,11,.1);color:#FCD34D}

/* Dark OCR status */
[data-theme="dark"] .v2-ocr-status--success{background:rgba(16,185,129,.12);color:#6EE7B7}
[data-theme="dark"] .v2-ocr-status--error{background:rgba(239,68,68,.12);color:#FCA5A5}

/* Dark alert inline */
[data-theme="dark"] .v2-alert-inline--ok{background:rgba(16,185,129,.1);color:#6EE7B7}
[data-theme="dark"] .v2-alert-inline--warn{background:rgba(245,158,11,.1);color:#FCD34D}
[data-theme="dark"] .v2-alert-inline--err{background:rgba(239,68,68,.1);color:#FCA5A5}
[data-theme="dark"] .v2-alert-inline--danger{background:rgba(239,68,68,.1);color:#FCA5A5}
[data-theme="dark"] .v2-alert-inline--info{background:rgba(59,130,246,.1);color:#93C5FD}
[data-theme="dark"] .v2-alert-inline--teal{background:rgba(109,197,224,.1);color:#8FD5EA}

/* Dark skeleton */
[data-theme="dark"] .skeleton{background:linear-gradient(90deg,#1E293B 25%,#334155 37%,#1E293B 63%)}

/* Dark user card */
[data-theme="dark"] .v2-user-card{background:var(--af-bg);border-color:var(--border)}

/* Dark login badge/preview */
[data-theme="dark"] .v2-login-badge{background:rgba(109,197,224,.15);color:#8FD5EA}
[data-theme="dark"] .v2-login-preview{background:var(--bg-off);border-color:var(--border);color:#8FD5EA}
[data-theme="dark"] .v2-login-id{background:var(--bg-off);color:#8FD5EA}

/* Dark site dropdown */
[data-theme="dark"] .site-dropdown select{background:var(--af-bg);color:var(--ink);border-color:var(--border)}

/* Dark key status */
[data-theme="dark"] .v2-key-status--ok{background:rgba(16,185,129,.12);color:#6EE7B7}
[data-theme="dark"] .v2-key-status--empty{background:rgba(245,158,11,.12);color:#FCD34D}

/* Dark temp validated */
[data-theme="dark"] .v2-temp-validated{background:rgba(16,185,129,.12);color:#6EE7B7}

/* Dark timeline */
[data-theme="dark"] .tl-card{background:var(--af-bg);border-color:var(--border)}
[data-theme="dark"] .tl-card:hover{background:rgba(255,255,255,.02)}
[data-theme="dark"] .tl-dot{border-color:var(--af-bg)}

/* Dark greeting banner */
[data-theme="dark"] .greeting-banner{background:var(--af-bg);border-color:rgba(255,255,255,.06)}
[data-theme="dark"] .v2-greeting-select{background:var(--af-bg);border-color:var(--border);color:var(--ink)}
[data-theme="dark"] .v2-greeting-select:hover{background:var(--bg-off);border-color:var(--af-teal)}

/* Dark auth (no change needed - already dark) */

/* Dark mode toggle (integrated in sidebar-user-actions) */

/* Smooth theme transition */
body,body *{transition-property:background-color,border-color,color,box-shadow;transition-duration:0s}
body.theme-transitioning,body.theme-transitioning *{transition-duration:.3s !important;transition-timing-function:var(--ease-apple) !important}

/* ══════════════════════════════════════════
   OFFLINE BANNER
   ══════════════════════════════════════════ */
.offline-banner{position:fixed;top:0;left:0;right:0;z-index:10001;background:var(--af-err-dark);color:#fff;text-align:center;padding:8px;font-size:12px;font-weight:600;animation:slideDown .3s ease}

/* PULL TO REFRESH */
.refresh-indicator{text-align:center;padding:8px;font-size:11px;color:var(--muted);display:none}
.refresh-indicator.active{display:block}

/* ══════════════════════════════════════════
   RESPONSIVE — 768px
   ══════════════════════════════════════════ */
@media(max-width:768px){
  .sidebar{transform:translateX(-100%)}
  .sidebar.open{transform:translateX(0)}
  .sidebar-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.3);backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);z-index:99;display:none}
  .sidebar-backdrop.show{display:block}
  .main-content{margin-left:0}
  .burger{display:none}
  .main-header{padding:0 16px;height:52px}
  .main-header h1{font-size:15px}
  .main-body{padding:16px;padding-bottom:calc(var(--bottomnav-h) + 16px)}
  .stats-grid{grid-template-columns:1fr 1fr;gap:10px}
  .stat-card{padding:16px}
  .stat-value{font-size:22px}
  .stat-label{font-size:11px}
  .form-row{grid-template-columns:1fr}
  .tabs{padding:0}
  .tab{padding:10px 16px;font-size:13px}
  .bottom-nav{display:block}
  .card{border-radius:var(--radius)}
  .card-header{padding:14px 16px;font-size:13px}
  .card-body{padding:16px}
  .list-item{padding:12px 14px;gap:12px}
  .list-icon{width:38px;height:38px;font-size:16px}
  .list-title{font-size:13px}
  .list-sub{font-size:11px}
  .global-stats-banner{grid-template-columns:1fr 1fr;gap:10px}
  .global-stat{padding:14px}
  .global-stat .gs-value{font-size:24px}
  .global-stat .gs-label{font-size:9px}
  .site-overview-card{padding:16px}
  .site-overview-card .site-card-title{font-size:14px}
  .site-overview-card .mini-stats{grid-template-columns:repeat(2,1fr);gap:6px}
  .site-overview-card .mini-stat{padding:8px 4px}
  .site-overview-card .mini-stat-value{font-size:16px}
  .modal{border-radius:var(--radius-lg);margin:10px}
  .modal-header{padding:16px 18px}
  .modal-body{padding:18px}
  .tl-card{padding:12px 14px}
  .tl-card-title{font-size:13px}
  .btn{font-size:13px;min-height:40px;padding:9px 16px}
  .btn-sm{min-height:32px;font-size:12px}
  .btn-lg{min-height:46px;font-size:14px;padding:12px 24px}
  .auth-card{padding:28px 24px}
  .greeting-banner{padding:16px 14px;margin-bottom:14px}
  .greeting-banner--compact{padding:12px 14px;margin-bottom:12px}
  .greeting-text h2{font-size:16px}
  .greeting-banner--compact .greeting-text h2{font-size:15px}
  .quick-actions{grid-template-columns:repeat(2,1fr);gap:10px}
  .quick-action{padding:16px 8px}
  .quick-action .qa-icon{font-size:24px}
  .quick-action .qa-label{font-size:11px}
  .site-dropdown select{font-size:11px;padding:5px 28px 5px 10px}
  .toast-container{left:12px;right:12px;max-width:none;transform:none}
  .photo-box{padding:18px 14px}
  .photo-box .photo-icon{font-size:26px;margin-bottom:4px}
  .photo-box .photo-text{font-size:13px}
  .photo-box .photo-hint{font-size:11px}
  .photo-preview{max-height:160px}
  .v2-grid-2{grid-template-columns:1fr}
  .v2-grid-4{grid-template-columns:repeat(2,1fr)}
  .v2-flex-wrap{flex-wrap:wrap}
}

@media(max-width:380px){
  .stats-grid{grid-template-columns:1fr}
  .auth-card{padding:24px 18px}
  .main-body{padding:12px;padding-bottom:calc(var(--bottomnav-h) + 12px)}
  .quick-actions{grid-template-columns:1fr 1fr}
  .greeting-text h2{font-size:16px}
  .greeting-banner--compact .greeting-text h2{font-size:14px}
  .photo-box{padding:14px 10px}
  .photo-box .photo-icon{font-size:22px}
  .photo-preview{max-height:140px}
}

/* ══════════════════════════════════════════
   PRINT
   ══════════════════════════════════════════ */
@media print{
  .sidebar,.main-header,.burger,.sidebar-backdrop,.bottom-nav,.bnav-more-menu,.bnav-more-backdrop,.toast-container,.offline-banner,.modal-overlay,.btn,.tabs,.form-input,.form-select,.form-textarea,.photo-box{display:none!important}
  .main-content{margin-left:0!important}
  .main-body{padding:0!important}
  body{background:#fff!important;color:#000!important;font-size:12pt!important}
  .card{box-shadow:none!important;border:1px solid #ccc!important;break-inside:avoid;page-break-inside:avoid;margin-bottom:12pt!important}
  .card-header{background:#f5f5f5!important;color:#000!important;border-bottom:1px solid #ccc!important}
  .list-item{border-bottom:1px solid #eee!important}
  .badge{border:1px solid #999!important;color:#000!important;background:#eee!important}
  .progress{border:1px solid #ccc!important}
  .progress-bar{background:#333!important;-webkit-print-color-adjust:exact;print-color-adjust:exact}
  a[href]:after{content:none!important}
  @page{margin:1.5cm}
}

/* ══════════════════════════════════════════
   REDUCED MOTION
   ══════════════════════════════════════════ */
@media(prefers-reduced-motion:reduce){
  *,*::before,*::after{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}
}
